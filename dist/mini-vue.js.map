{"version":3,"file":"mini-vue.js","sources":["../src/utils/index.js","../src/observer/array.js","../src/observer/index.js","../src/state.js","../src/compiler/parse.js","../src/compiler/index.js","../src/init.js","../src/index.js"],"sourcesContent":["/**\n * 是否是对象\n * @param {*} value 判断元素\n * @returns Boolean\n */\nexport function isObject(value) {\n  return value !== null && typeof value === 'object';\n}\n\n/**\n * 定义一个属性\n * @param {Object} obj 目标对象\n * @param {String} key 定义的属性\n * @param {*} val 初始值\n * @param {*} enumerable 是否可枚举\n */\nexport function def(obj, key, val, enumerable) {\n  Object.defineProperty(obj, key, {\n    value: val,\n    enumerable: !!enumerable,\n    configurable: true,\n    writable: true,\n  });\n}\n","import { def } from '../utils/index';\n\n// 原生数组原型\nconst arrayProto = Array.prototype;\n// arrayMethods 继承数组原型\nexport const arrayMethods = Object.create(arrayProto);\n\n// 拦截这 7 个会改变元数组的方法\nconst methodsToPatch = [\n  'push',\n  'pop',\n  'shift',\n  'unshift',\n  'splice',\n  'sort',\n  'reverse',\n];\n\n// 拦截数组方法\n// eslint-disable-next-line prefer-arrow-callback\nmethodsToPatch.forEach(function (method) {\n  const original = arrayProto[method];\n\n  def(arrayMethods, method, function (...args) {\n    const result = original.apply(this, args);\n    const ob = this.__ob__;\n    // 数组有新增的元素\n    let inserted;\n    // eslint-disable-next-line default-case\n    switch (method) {\n      case 'push':\n      case 'unshift':\n        inserted = args;\n        break;\n      case 'splice':\n        inserted = args.slice(2);\n        break;\n    }\n    // 新增的元素 也进行响应式观测\n    if (inserted) ob.observeArray(inserted);\n    return result;\n  });\n});\n","import { isObject, def } from '../utils/index';\nimport { arrayMethods } from './array';\n\nclass Observe {\n  constructor(value) {\n    // 增加 __ob__ 属性\n    def(value, '__ob__', this);\n    if (Array.isArray(value)) {\n      value.__proto__ = arrayMethods;\n      this.observeArray(value);\n    } else {\n      this.walk(value);\n    }\n  }\n\n  // 对象\n  walk(obj) {\n    const keys = Object.keys(obj);\n    for (let i = 0; i < keys.length; i++) {\n      defineReactive(obj, keys[i], obj[keys[i]]);\n    }\n  }\n\n  // 数组\n  observeArray(items) {\n    for (let i = 0; i < items.length; i++) {\n      observe(items[i]);\n    }\n  }\n}\n\n// 数据响应式（核心）\nexport function defineReactive(obj, key, val) {\n  // 递归，使对象值也进行响应式\n  observe(val);\n  // 数据劫持\n  Object.defineProperty(obj, key, {\n    enumerable: true,\n    configurable: true,\n    get() {\n      console.log(`🚀 ~ 访问值 ${key}`, val);\n      return val;\n    },\n    set(value) {\n      val = value;\n      console.log(`🚀 ~ 设置值 ${key}`, value);\n    },\n  });\n}\n\n// 观察数据\nexport function observe(value) {\n  if (isObject(value) || Array.isArray(value)) {\n    return new Observe(value);\n  }\n}\n","import { observe } from './observer/index';\n\n// 数据代理\nexport function proxy(target, sourceKey, key) {\n  Object.defineProperty(target, key, {\n    enumerable: true,\n    configurable: true,\n    get() {\n      return target[sourceKey][key];\n    },\n    set(val) {\n      target[sourceKey][key] = val;\n    },\n  });\n}\n\nexport function initState(vm) {\n  const opts = vm.$options;\n  if (opts.props) {\n    initProps(vm);\n  }\n\n  if (opts.methods) {\n    initMethods(vm);\n  }\n\n  if (opts.data) {\n    initData(vm);\n  }\n\n  if (opts.computed) {\n    initComputed(vm);\n  }\n\n  if (opts.watch) {\n    initWatch(vm);\n  }\n}\n\nfunction initProps() {}\n\nfunction initMethods() {}\n\n// 初始化 data\nfunction initData(vm) {\n  // 传入的 data\n  let { data } = vm.$options;\n\n  data = vm._data = typeof data === 'function' ? data.call(vm) : data || {};\n  console.log('🚀 ~ file: state.js ~ line 33 ~ initData ~ data', data);\n\n  // 将 data 代理到 vm 上，可通过 this.dataKey 访问\n  for (const key in data) {\n    if (Object.hasOwnProperty.call(data, key)) {\n      proxy(vm, '_data', key);\n    }\n  }\n\n  // 观察数据 -- 响应式数据核心\n  observe(data);\n}\n\nfunction initComputed() {}\n\nfunction initWatch() {}\n","/* eslint-disable no-continue */\n/* eslint-disable no-unused-vars */\n/* eslint-disable no-cond-assign */\n/* eslint-disable no-useless-escape */\nconst ncname = '[a-zA-Z_][\\\\-\\\\.0-9_a-zA-Z]*'; // 匹配标签名\nconst qnameCapture = `((?:${ncname}\\\\:)?${ncname})`; // 匹配特殊标签\nconst startTagOpen = new RegExp(`^<${qnameCapture}`); // 匹配标签开始\nconst startTagClose = /^\\s*(\\/?)>/; // 匹配标签结束  >\nconst endTag = new RegExp(`^<\\\\/${qnameCapture}[^>]*>`); // 匹配标签结尾\nconst attribute = /^\\s*([^\\s\"'<>\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/; // 匹配属性\n\n// 根节点，当前父节点\nlet root;\nlet currentParent;\n//\nconst stack = [];\n// 元素、文本 nodeType 值\nconst ELEMENT_TYPE = 1;\nconst TEXT_TYPE = 3;\n\n// 生成ast\nfunction creatASTElement(tagName, attrs) {\n  return {\n    tag: tagName,\n    type: ELEMENT_TYPE,\n    children: [],\n    attrs,\n    parent: null,\n  };\n}\n\n// 处理开始标签\nfunction handleStartTag({ tagName, attrs }) {\n  const element = creatASTElement(tagName, attrs);\n\n  if (!root) {\n    root = element;\n  }\n\n  currentParent = element;\n  stack.push(element);\n}\n\n// 处理结束标签\nfunction handleEndTag(tagName) {\n  // 取出栈顶元素\n  const element = stack.pop();\n\n  currentParent = stack[stack.length - 1];\n\n  if (currentParent) {\n    element.parent = currentParent;\n    currentParent.children.push(element);\n  }\n}\n\n// 处理文本\nfunction handleChars(text) {\n  // 去掉空格\n  text = text.replace(/\\s/g, '');\n  if (text) {\n    currentParent.children.push({\n      type: TEXT_TYPE,\n      text,\n    });\n  }\n}\n\n//  将 HTML 字符串转换为 AST。\nexport function parse(html) {\n  while (html) {\n    // 查找 <\n    const textEnd = html.indexOf('<');\n\n    // 如果 < 在第一个 证明接下来就是一个标签 不管是开始还是结束标签\n    if (textEnd === 0) {\n      // 匹配开始标签\n      const startTagMatch = parseStartTag();\n      if (startTagMatch) {\n        // 生成AST\n        handleStartTag(startTagMatch);\n        continue;\n      }\n\n      // 匹配结束标签\n      const endTagMatch = html.match(endTag);\n      if (endTagMatch) {\n        advance(endTagMatch[0].length);\n        handleEndTag(endTagMatch[1]);\n        continue;\n      }\n    }\n\n    // 文本\n    let text;\n    if (textEnd > -1) {\n      text = html.substring(0, textEnd);\n    }\n    if (text) {\n      advance(text.length);\n      handleChars(text);\n    }\n  }\n\n  // 匹配开始标签\n  function parseStartTag() {\n    const start = html.match(startTagOpen);\n\n    if (start) {\n      const match = {\n        tagName: start[1],\n        attrs: [],\n      };\n\n      // 匹配到后，截取掉开始标签\n      advance(start[0].length);\n\n      let end;\n      let attr;\n\n      while (\n        !(end = html.match(startTagClose))\n        && (attr = html.match(attribute))\n      ) {\n        advance(attr[0].length);\n        attr = {\n          name: attr[1],\n          value: attr[3] || attr[4] || attr[5], // 这里是因为正则捕获支持双引号 单引号 和无引号的属性值\n        };\n        match.attrs.push(attr);\n      }\n\n      if (end) {\n        advance(1);\n        return match;\n      }\n    }\n  }\n\n  function advance(n) {\n    html = html.substring(n);\n  }\n\n  return root;\n}\n","import { parse } from './parse';\n\n/**\n * 模板转化\n * @param {String} template 模板\n */\nexport function compileToFunctions(template) {\n  const ast = parse(template);\n  console.log(ast);\n}\n","import { initState } from './state';\nimport { compileToFunctions } from './compiler/index';\n\nexport function initMixin(Vue) {\n  // 初始化\n  Vue.prototype._init = function (options) {\n    const vm = this;\n    vm.$options = options;\n\n    // 初始化状态\n    initState(vm);\n\n    if (vm.$options.el) {\n      this.$mount(vm.$options.el);\n    }\n  };\n\n  // 挂载\n  Vue.prototype.$mount = function (el) {\n    const vm = this;\n    const options = vm.$options;\n\n    el = document.querySelector(el);\n\n    // 如果没有 render 属性\n    if (!options.render) {\n      let { template } = options;\n\n      // 没有 render 和 template，但是存在 el，就把 el 外层 html 赋值给 template\n      if (!template && el) {\n        template = el.outerHTML;\n      }\n\n      // 把 template 转化为 render 函数\n      if (template) {\n        const render = compileToFunctions(template);\n        options.render = render;\n      }\n    }\n  };\n}\n","import { initMixin } from './init';\n\nfunction Vue(options) {\n  // 初始化\n  this._init(options);\n}\n\ninitMixin(Vue);\n\nexport default Vue;\n"],"names":["isObject","value","def","obj","key","val","enumerable","Object","defineProperty","configurable","writable","arrayProto","Array","prototype","arrayMethods","create","methodsToPatch","forEach","method","original","args","result","apply","ob","__ob__","inserted","slice","observeArray","Observe","isArray","__proto__","walk","keys","i","length","defineReactive","items","observe","get","console","log","set","proxy","target","sourceKey","initState","vm","opts","$options","props","methods","data","initData","computed","watch","_data","call","hasOwnProperty","ncname","qnameCapture","startTagOpen","RegExp","startTagClose","endTag","attribute","root","currentParent","stack","ELEMENT_TYPE","TEXT_TYPE","creatASTElement","tagName","attrs","tag","type","children","parent","handleStartTag","element","push","handleEndTag","pop","handleChars","text","replace","parse","html","textEnd","indexOf","startTagMatch","parseStartTag","endTagMatch","match","advance","substring","start","end","attr","name","n","compileToFunctions","template","ast","initMixin","Vue","_init","options","el","$mount","document","querySelector","render","outerHTML"],"mappings":"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"}